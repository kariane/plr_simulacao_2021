<!DOCTYPE html>
<html>
	<head>
		<title>Cálculo PLR</title>
		<meta charset="UTF-8" />
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl"
			crossorigin="anonymous"
		/>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
			crossorigin="anonymous"
		></script>
		<script>
			function renderData() {
	const cargo = document.getElementById('cargo');
	const area = document.getElementById('area');
	const time = +document.getElementById('360time').value;
	const gestor = +document.getElementById('360gestor').value;
	const salario = +document.getElementById('salario').value;
	const discricionario = +document.getElementById('discricionario').value;
	const calibragem = +document.getElementById('calibragem').value;
	const diasTrabalhados = +document.getElementById('dtrabalhados').value;
	const resultado = document.getElementById('resultado');

	const indexCargo = cargo.options.selectedIndex;
	const valorCargo = cargo.options[indexCargo].value;

	const indexArea = area.options.selectedIndex;
	const valorArea = area.options[indexArea].value;

	let target = salario * valorCargo;

	const vfinal =
		calibragem +
		PLR_final_discricionario(target, discricionario) +
		PLR_360_gestor(target, gestor) +
		PLR_360_time(target, time) +
		PLR_Meta_area(target, valorArea) +
		PLR_base_BP(target);

	const template = `
		<ul style="color: #5c5c5c">Valor do PLR com base no BP
			<li>${PLR_base_BP(target)}</li>
		</ul>
		<ul style="color: #5c5c5c">Valor PLR com Meta área
			<li>${PLR_Meta_area(target, valorArea)}</li>
		</ul>
		<ul style="color: #5c5c5c">Valor do PLR com base na 360 do time
			<li>${PLR_360_time(target, time)}</li>
		</ul>
		<ul style="color: #5c5c5c">Valor do PLR com base na 360 do gestor
			<li>${PLR_360_gestor(target, gestor)}</li>
		</ul>
		<ul style="color: #5c5c5c">Valor final do discricionario
			<li>${PLR_final_discricionario(target, discricionario)}</li>
		</ul>
		<ul style="color: #5c5c5c"><strong>Resultado</strong>
			<li>${((vfinal / 365) * diasTrabalhados).toFixed(2)}</li>
		</ul>
	`;

	resultado.innerHTML = template;
}

const PLR_base_BP = (target) => {
	const porcentqueoBPrep = 0.2;
	const atingimento_do_BP = 0.9972;
	const valor_BPrep = target * porcentqueoBPrep;

	return valor_BPrep * atingimento_do_BP;
};

const PLR_Meta_area = (target, area) => {
	const totalquerepMetaArea = 0.3;
	const valorqueoBPrepMetaArea = target * totalquerepMetaArea;

	return valorqueoBPrepMetaArea * (area / 100);
};

const PLR_360_time = (target, time) => {
	const porcent_time = 0.1;
	const valor_alvo_time = target * porcent_time;
	const resultante_notatime = time / 5;

	return valor_alvo_time * resultante_notatime;
};

const PLR_360_gestor = (target, gestor) => {
	const porcent_gestor = 0.15;
	const vagestor = target * porcent_gestor;
	const resultante_nota_gestor = gestor / 5;

	return vagestor * resultante_nota_gestor;
};

const PLR_final_discricionario = (target, discricionario) => {
	const porc_discri = 0.25;
	const vadiscri = target * porc_discri;

	return vadiscri * (discricionario / 100);
};
		</script>
	</head>
	<body>
		<form>
			<div class="input-group w-25">
				<div class="input-group-prepend">
					<span class="input-group-text">Salário</span>
				</div>
				<input
					type="text"
					class="form-control w-25 mb-3"
					name="Salario"
					placeholder="R$"
					aria-label="Salario"
					id="salario"
				/>
			</div>
			<div class="input-group w-25">
				<div class="input-group-prepend">
					<span class="input-group-text">Cargo</span>
				</div>
				<select class="form-select w-25 mb-3" name="Cargo" id="cargo">
					<option value="3">Analista</option>
					<option value="4">Especialista</option>
				</select>
			</div>

			<div class="input-group w-25">
				<div class="input-group-prepend">
					<span class="input-group-text">Área</span>
				</div>
				<select name="Área" class="form-select w-25 mb-3" id="area">
					<option value="90.50">Compliance</option>
					<option value="99">Finance</option>
					<option value="100">Marketing</option>
					<option value="100">Operações</option>
					<option value="87.89">TI</option>
					<option value="100">RH</option>
					<option value="100">Legal</option>
					<option value="100">PM</option>
					<option value="65">UX</option>
					<option value="99">Produto</option>
				</select>
			</div>

			<div class="input-group w-25">
				<div class="input-group-prepend">
					<span class="input-group-text">360 do Time</span>
				</div>
				<input
					type="text"
					class="form-control mb-3"
					name="360 do Time"
					aria-label="360 do Time"
					placeholder="0-5"
					id="360time"
				/>
			</div>

			<div class="input-group w-25">
				<div class="input-group-prepend">
					<span class="input-group-text">360 do Gestor</span>
				</div>
				<input
					type="text"
					class="form-control mb-3"
					name="360 do Gestor"
					placeholder="0-5"
					aria-label="360 do Gestor"
					id="360gestor"
				/>
			</div>

			<div class="input-group w-25">
				<div class="input-group-prepend">
					<span class="input-group-text">Discricionário</span>
				</div>
				<input
					type="text"
					class="form-control mb-3"
					name="Discricionário"
					placeholder="%"
					aria-label="Discricionário"
					id="discricionario"
				/>
			</div>

			<div class="input-group w-25">
				<div class="input-group-prepend">
					<span class="input-group-text">Calibragem</span>
				</div>
				<input
					type="text"
					class="form-control mb-3"
					name="Calibragem"
					placeholder="R$"
					aria-label="Calibragem"
					id="calibragem"
				/>
			</div>

			<div class="input-group w-25">
				<div class="input-group-prepend">
					<span class="input-group-text">Dias trabalhados</span>
				</div>
				<input
					type="text"
					class="form-control mb-3"
					name="Dias trabalhados"
					aria-label="Dias trabalhados"
					id="dtrabalhados"
				/>
			</div>

			<input
				type="button"
				class="btn btn-success mb-3"
				value="Calcular"
				data-bs-toggle="modal"
				data-bs-target="#modal"
				onclick="renderData()"
			/>
			<input
				type="button"
				class="btn btn-danger mb-3"
				value="Limpar"
				onclick=" location.reload()"
			/>
		</form>

		<div
			class="modal fade"
			id="modal"
			tabindex="-1"
			aria-labelledby="modalLabel"
			aria-hidden="true"
		>
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="modalLabel">
							Simulação PLR
						</h5>
						<button
							type="button"
							class="btn-close"
							data-bs-dismiss="modal"
							aria-label="Close"
						></button>
					</div>
					<div class="modal-body" id="resultado"></div>
					<div class="modal-footer">
						<button
							type="button"
							class="btn btn-secondary"
							data-bs-dismiss="modal"
						>
							Entendi
						</button>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>